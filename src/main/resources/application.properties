# --- Configuración de Base de Datos DINÁMICA ---
# En tu PC usa: localhost, 3306, dinastia, root, root
# En Railway usa: Las variables que te dieron automáticamente (MYSQLHOST, MYSQLPORT, etc.)

spring.datasource.url=jdbc:mysql://${MYSQLHOST:localhost}:${MYSQLPORT:3306}/${MYSQLDATABASE:dinastia}?allowPublicKeyRetrieval=true&useSSL=false
spring.datasource.username=${MYSQLUSER:root}
spring.datasource.password=${MYSQLPASSWORD:root}

spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# --- Configuración de JPA / Hibernate ---
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect

# --- Configuración del Servidor ---
# Railway asigna un puerto dinámico, por eso usamos la variable PORT
server.port=${PORT:8080}
server.address=0.0.0.0

# --- Configuración de Archivos (CRÍTICO PARA NUBE) ---
# Cambiamos "C:/" por una ruta relativa o una variable de entorno.
# "./uploads" creará la carpeta dentro del proyecto en Railway.
app.upload.dir=${UPLOAD_DIR:./uploads}

# Límites de tamaño
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB